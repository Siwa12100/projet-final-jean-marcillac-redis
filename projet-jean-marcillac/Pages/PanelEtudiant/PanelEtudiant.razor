@page "/paneletudiant"
@using projet_jean_marcillac.Composants.FormulaireConnexion
@using projet_jean_marcillac.Composants.Footer
@using projet_jean_marcillac.Composants.NavBar
@using projet_jean_marcillac.Composants.Etudiants.TableauCoursEtudiant

<NavBar/>

<div class="contenu">
    @if (this.MembreConnecte == null)
    {
        <h1>Panel Etudiant</h1>
        <FormulaireConnexion OnConnexion="OnConnexion"
                            Membres="@TousLesEtudiants"
                            Titre="Connexion - Professeur"/>
    }
    else
    {
        <h1>Panel Etudiant : @this.MembreConnecte.Nom @this.MembreConnecte.Prenom</h1>

        <div class="cours">
            <div class="coursAbonnes">
                
                @if (this.CoursAbonnes != null)
                {
                    @foreach (var cours in this.CoursAbonnes)
                    {
                        <div class="coursAbonne">
                            <h2>@cours.Titre</h2>
                            <p>@cours.Resume</p>
                            <p>@cours.NombreDePlacesDisponibles places disponibles</p>
                            <p>@cours.TempsAvantExpiration minutes avant expiration</p>
                            <MudButton StartIcon="@Icons.Material.Outlined.Alarm"
                                       Color="Color.Success" Variant="Variant.Filled"
                                       Class="text-white" OnClick="() => DesabonnerEtudiant(cours)">
                                Se d√©sabonner
                            </MudButton>
                        </div>
                    }
                }
                

            </div>
            
            <div class="coursNonAbonnes">
                <TableauCoursEtudiant Cours="@this.CoursNonAbonnes"
                                      OnAbonnementEtudiant="OnAbonnementEtudiant" />
            </div>

            
        </div>
    }
</div>

<Footer/>